<!doctype html>
<html lang="az">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Növbəti 8 dərslik paket — iki versiya</title>
  <style>
    :root{ --bg:#0b1220; --card:#111827; --border:#334155; --text:#e5e7eb; --muted:#94a3b8; --prim:#0ea5e9; }
    body{font:16px/1.4 -apple-system,system-ui,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:var(--bg);color:var(--text);padding:16px}
    .card{max-width:720px;margin:0 auto;background:var(--card);border:1px solid #1f2937;border-radius:14px;padding:16px}
    h3{margin:0 0 12px}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 12px}
    .tab{appearance:none;border:1px solid var(--border);background:#0c1628;color:var(--text);padding:8px 12px;border-radius:999px;cursor:pointer}
    .tab[aria-pressed="true"]{background:var(--prim);border-color:var(--prim);color:#fff}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0}
    .ctrl{flex:1 1 240px; min-width:200px}
    label{display:block;margin:6px 0 4px;color:var(--muted);font-size:13px}
    input,button{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:#0b1220;color:var(--text)}
    input:focus{outline:none;border-color:#38bdf8;box-shadow:0 0 0 3px rgba(56,189,248,.25)}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
    .btn{background:var(--prim);border-color:var(--prim);color:#fff;font-weight:600;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--text);border-color:var(--border)}
    .msg{margin-top:12px;padding:12px;border:1px dashed var(--border);border-radius:10px}
    .muted{color:var(--muted);font-size:12px}
    .hide{display:none}
  </style>
</head>
<body>
  <div class="card">
    <h3>Növbəti 8 dərslik paket — bitiş tarixi</h3>

    <!-- Rejim seçimi -->
    <div class="tabs">
      <button id="tabDays" class="tab" type="button" aria-pressed="true">Versiya 1 — Günlə (bu gündən çıx)</button>
      <button id="tabDate" class="tab" type="button" aria-pressed="false">Versiya 2 — Tarixlə (özün seç)</button>
    </div>

    <!-- Versiya 1: Günlə -->
    <div id="paneDays">
      <div class="row">
        <div class="ctrl">
          <label for="offset">Neçə gün <b>əvvəl</b> başlasın? (0 = bu gün)</label>
          <input id="offset" type="number" inputmode="numeric" pattern="[0-9]*" min="0" value="0">
        </div>
        <div class="ctrl">
          <label for="addDays1">Üstünə neçə gün gəlsin?</label>
          <input id="addDays1" type="number" inputmode="numeric" pattern="[0-9]*" min="1" value="31">
        </div>
      </div>
      <div class="actions">
        <button id="go1" type="button" class="btn">Hesabla</button>
        <button id="clear1" type="button" class="btn ghost">Təmizlə</button>
      </div>
      <div id="out1" class="msg hide"></div>
      <div id="out1extra" class="msg hide"></div>
      <div class="muted">Qeyd: Versiya 1-də əlavə xətt çıxır — (bu gün − yazdığın gün) + <b>3 gün</b> ⇒ “Bu ay üçün 8 dərslik paketiniz … tarixində bitti.”</div>
    </div>

    <!-- Versiya 2: Tarixlə -->
    <div id="paneDate" class="hide">
      <div class="row">
        <div class="ctrl">
          <label for="start">Başlanğıc tarixi seç</label>
          <input id="start" type="date">
        </div>
        <div class="ctrl">
          <label for="addDays2">Üstünə neçə gün gəlsin?</label>
          <input id="addDays2" type="number" inputmode="numeric" pattern="[0-9]*" min="1" value="31">
        </div>
      </div>
      <div class="actions">
        <button id="go2" type="button" class="btn">Hesabla</button>
        <button id="clear2" type="button" class="btn ghost">Təmizlə</button>
      </div>
      <div id="out2" class="msg hide"></div>
      <div id="out2extra" class="msg hide"></div>
      <div class="muted">Qeyd: Versiya 2 üçün də əlavə xətt əlavə edildi — (seçilən başlanğıc tarix) + <b>3 gün</b> ⇒ “Bu ay üçün 8 dərslik paketiniz … tarixində bitti.”</div>
    </div>
  </div>

  <script>
    (function(){
      // Ay adları (M dd, yyyy)
      var months = ["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"];
      function fmtMonthDayYear(d){ return months[d.getMonth()] + " " + d.getDate() + ", " + d.getFullYear(); }
      function toLocalYMD(d){ var y=d.getFullYear(), m=String(d.getMonth()+1).padStart(2,'0'), dd=String(d.getDate()).padStart(2,'0'); return y+"-"+m+"-"+dd; }
      function startFromTodayMinus(daysBack){ var now=new Date(); var d=new Date(now.getFullYear(),now.getMonth(),now.getDate()); d.setDate(d.getDate()-daysBack); return d; }
      function addDaysLocal(d, n){ var x=new Date(d.getFullYear(),d.getMonth(),d.getDate()); x.setDate(x.getDate()+n); return x; }
      function $(id){ return document.getElementById(id); }
      function show(el){ el.classList.remove("hide"); }
      function hide(el){ el.classList.add("hide"); }

      // Tablar
      var tabDays=$("tabDays"), tabDate=$("tabDate"), paneDays=$("paneDays"), paneDate=$("paneDate");
      function activate(tab){
        if(tab==="days"){ tabDays.setAttribute("aria-pressed","true"); tabDate.setAttribute("aria-pressed","false"); paneDays.classList.remove("hide"); paneDate.classList.add("hide"); }
        else{ tabDays.setAttribute("aria-pressed","false"); tabDate.setAttribute("aria-pressed","true"); paneDays.classList.add("hide"); paneDate.classList.remove("hide"); }
      }
      tabDays.addEventListener("click", function(){ activate("days"); }, false);
      tabDate.addEventListener("click", function(){ activate("date"); }, false);

      // Versiya 1 (günlə)
      var offset=$("offset"), addDays1=$("addDays1"), go1=$("go1"), clear1=$("clear1"), out1=$("out1"), out1extra=$("out1extra");
      function runV1(){
        var back=parseInt(offset.value,10); var plus=parseInt(addDays1.value,10);
        if(isNaN(back)||back<0) back=0; if(isNaN(plus)||plus<1) plus=31;
        var start=startFromTodayMinus(back), end=addDaysLocal(start, plus);
        out1.textContent="Şagirdin növbəti 8 dərslik paketi " + fmtMonthDayYear(end) + " bitəcək."; show(out1);
        var extraEnd=addDaysLocal(start, 3);
        out1extra.textContent="Bu ay üçün 8 dərslik paketiniz " + fmtMonthDayYear(extraEnd) + " tarixində bitti."; show(out1extra);
      }
      function clearV1(){ offset.value=0; addDays1.value=31; hide(out1); out1.textContent=""; hide(out1extra); out1extra.textContent=""; }
      go1.addEventListener("click", runV1, false); clear1.addEventListener("click", clearV1, false);
      offset.addEventListener("keydown", function(e){ if(e.key==="Enter") runV1(); }, false);
      addDays1.addEventListener("keydown", function(e){ if(e.key==="Enter") runV1(); }, false);

      // Versiya 2 (tarixlə)
      var start=$("start"), addDays2=$("addDays2"), go2=$("go2"), clear2=$("clear2"), out2=$("out2"), out2extra=$("out2extra");
      (function setToday(){ var now=new Date(); start.value=toLocalYMD(now); })();

      function runV2(){
        if(!start.value){ show(out2); out2.textContent="Zəhmət olmasa başlanğıc tarixini seçin."; return; }
        var base=new Date(start.value+"T00:00:00"); var plus=parseInt(addDays2.value,10); if(isNaN(plus)||plus<1) plus=31;
        if(isNaN(base)){ show(out2); out2.textContent="Tarix düzgün deyil."; return; }
        var end=addDaysLocal(base, plus);
        out2.textContent="Şagirdin növbəti 8 dərslik paketi " + fmtMonthDayYear(end) + " bitəcək."; show(out2);
        // Əlavə xətt: seçilən başlanğıc + 3 gün
        var extraEnd=addDaysLocal(base, 3);
        out2extra.textContent="Bu ay üçün 8 dərslik paketiniz " + fmtMonthDayYear(extraEnd) + " tarixində bitti."; show(out2extra);
      }
      function clearV2(){ var now=new Date(); start.value=toLocalYMD(now); addDays2.value=31; hide(out2); out2.textContent=""; hide(out2extra); out2extra.textContent=""; }
      go2.addEventListener("click", runV2, false); clear2.addEventListener("click", clearV2, false);
      start.addEventListener("keydown", function(e){ if(e.key==="Enter") runV2(); }, false);
      addDays2.addEventListener("keydown", function(e){ if(e.key==="Enter") runV2(); }, false);

      // İlk açılışda Versiya 1 aktiv olsun
      activate("days");
    })();
  </script>
</body>
</html>
